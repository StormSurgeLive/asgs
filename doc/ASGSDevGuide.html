<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.7">
<title>The ASGS Developers Guide</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>The ASGS Developers Guide</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>The ADCIRC Surge Guidance System (ASGS) is a portable, transportable,
geographically agnostic software system for generating storm surge and wave
guidance from ADCIRC + SWAN in real time on high resolution grids.</p></div>
<div class="paragraph"><p>It derives meteorological forcing either from gridded wind fields (e.g., NCEP’s
NAM model) or, for tropical cyclones, from a parametric wind / pressure model
using storm parameters extracted from the text of the National Hurricane
Center&#8217;s Forecast/Advisories.</p></div>
<div class="paragraph"><p>For tropical cyclones the system is also configured to run a mini-ensemble of
storms comprised of a predefined set of perturbations to the NHC’s consensus
forecast. The ASGS can be configured to accept river flow forecasts as input as
well.</p></div>
<div class="paragraph"><p>The system runs successfully on a wide range of high performance computing
platforms including Ranger at the Texas Advanced Computing Center (Univ Texas),
Diamond, Jade and Sapphire at the US Army Corps of Engineers Engineering
Research and Development Center, QueenBee and Tezpur at LONI and LSU, and
several HPC platforms / clusters at the University of North Carolina at Chapel
Hill.  The ASGS has been run on several grids covering the western North
Atlantic, Caribbean Sea and Gulf of Mexico with high resolution areas in the
northern and western Gulf of Mexico, in North Carolina and in
Maryland/Virginia.</p></div>
<div class="paragraph"><p>This document provides (a) a tour of the source, with brief explanations of the
function of each major source code file; (b) installation requirements and
procedure; (c) details of the vortex meterological model embedded in ADCIRC;
(d) the guidelines that ADCIRC Surge Guidance System developers should use when
developing new code for ASGS and its related utilities; and (e) a short
tutorial for Subversion (svn), the version control software that we use to
coordinate development and ease the task of merging in new features.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_guided_tour">Guided Tour</h2>
<div class="sectionbody">
<div class="paragraph"><p>The following is a list of directories and files that are provided
with the ASGS along with a description of their purpose and function.</p></div>
<div class="sect2">
<h3 id="_base">base</h3>
<div class="paragraph"><p>The root of the ASGS directory structure contains the scripts that provide
the main features of the ASGS.</p></div>
<div class="sect3">
<h4 id="_asgs_main_sh">asgs_main.sh</h4>
<div class="paragraph"><p>The actual script that is executed to activate the ASGS is called asgs_main.sh.
Its main function is to perform a hindcast if needed, then move to a
nowcast/forecast loop. It contains code that controls the preparation of new
runs, sets up computational jobs, submits them, and monitors them. It also
contains a small section that contains conditionally executed system-specific
configuration information.</p></div>
<div class="paragraph"><p>All the code that actually does the specialized work, e.g., downloading
meteorological data, constructing control files, generating visualizations of
results, etc., is contained in modular external scripts.</p></div>
<div class="paragraph"><p>The asgs_main.sh script is the most central and most important one in the
ASGS.</p></div>
</div>
<div class="sect3">
<h4 id="_control_file_gen_pl">control_file_gen.pl</h4>
<div class="paragraph"><p>The ADCIRC fort.15 and SWAN fort.26 (run control) files are generated by
control_file_gen.pl. This script accepts a wide array of input arguments that
describe the sort of run the Operator has configured, including the use of
tidal forcing, wave coupling, time step size, desired output file format (ascii
vs netcdf), and many others.</p></div>
<div class="paragraph"><p>Other input arguments to this script provide state information, e.g., whether
the model is to be hotstarted, the current simulation time, the advisory
number from the latest National Hurricane Center Forecast/Advisory
(in the case of hurricane-related runs), etc.</p></div>
<div class="paragraph"><p>When the script runs, it uses templates that have been made for the control
files along with the input arguments and a few external programs (for
generating tides, etc) and the already-generated meteorological forcing files
(if any) and produces control files for ADCIRC or ADCIRC+SWAN along with
metadata in the run.properties file.</p></div>
<div class="paragraph"><p>This is the 2nd most important script in the ASGS (after asgs_main.sh).</p></div>
</div>
<div class="sect3">
<h4 id="_get_atcf_pl">get_atcf.pl</h4>
<div class="paragraph"><p>The get_atcf.pl script is used by the ASGS to monitor the RSS feed from the
National Hurricane Center for new Forecast/Advisories and to download the
latest advisory the moment it becomes available. It does this by parsing the
xml file posted on the RSS feed, and when the advisory number has been updated
by the NHC, get_atcf.pl follows the link to the html file containing the actual
advisory information.</p></div>
<div class="paragraph"><p>After downloading a new Forecast/Advisory from the National Hurricane Center
website, the script then downloads the latest hindcast (BEST track) file
for the same storm from NHC&#8217;s anonymous ftp site. Both these files are required
for generating an ADCIRC fort.22 (meteorological forcing) file.</p></div>
<div class="paragraph"><p>Once a forecast is complete, and the next advisory has not yet been posted, the
script waits 60 seconds before checking the RSS site again. It will continue
checking every 60 seconds until the next advisory is posted.</p></div>
<div class="paragraph"><p>The script is called get_atcf.pl because the so-called BEST track file format
(that describes the files that the script downloads from the anonymous ftp
site) was designed by the Automated Tropical Cyclone Forecasting system (ATCF).
Please see the section below that discusses the ADCIRC parametric vortex models
below for more details on this format, including a link to the online
documentation.</p></div>
</div>
<div class="sect3">
<h4 id="_nhc_advisory_bot_pl">nhc_advisory_bot.pl</h4>
<div class="paragraph"><p>The nhc_advisory_bot.pl script takes the html file downloaded by get_atcf.pl
script and parses out all the information required to write an ATCF formatted
forecast file ("OFCL"). It then generates the ATCF formatted file with the
forecast parameters; this file could be used directly by one of ADCIRC&#8217;s
internal parametric vortex models, but the ASGS subjects it to further
processing as described below.</p></div>
</div>
<div class="sect3">
<h4 id="_storm_track_gen_pl">storm_track_gen.pl</h4>
<div class="paragraph"><p>The storm_track_gen.pl script takes the ATCF-formatted file generated by
nhc_advisory_bot.pl (representing the forecast), the ATCF-formatted file
downloaded by get_atcf.pl (representing the hindcast), and the currrent
simulation state (representing the current hotstart time) and constructs an
appropriate ADCIRC fort.22 (meteorological forcing) file as output.</p></div>
<div class="paragraph"><p>This script accepts optional arguments that can be used to vary the storm&#8217;s
track (expressed as a percentage of the desired distance between the consensus
track and the edge of the cone of uncertainty), the radius to maximum winds
(expressed as a percentage of the radius to maximum winds determined from the
input), the overland speed of the storm (to speed it up or slow it down), and
the maximum wind speed. These variations are configured in the overall ASGS
configuration file and can be used to explore "what-if" scenarios during a
tropical cyclone event.</p></div>
</div>
<div class="sect3">
<h4 id="_get_nam_pl">get_nam.pl</h4>
<div class="paragraph"><p>The get_nam.pl script is used by the ASGS to monitor NCEP&#8217;s anonymous ftp site
for newly released output from their NAM (North American Mesoscale) atmospheric
model. The WRF-NMM (Weather Research and Forecasting, Non-hydrostatic
Mesoscale Model) is used to produce NAM results.</p></div>
<div class="paragraph"><p>The script accepts the current time of the ADCIRC simulation as input, and
downloads the latest available NAM data, provided that the latest available
data is later than the current ADCIRC simulation time. If there are no NAM data
available that postdate the current ADCIRC simulation time, the script print
and information message and exits. The calling routine (in asgs_main.sh) then
retries the download every 60 seconds until new data have been discovered and
downloaded.</p></div>
<div class="paragraph"><p>The get_nam.pl script relies on the "wgrib2" executable to perform basic
sanity checks on the grib2 files that it downloads.</p></div>
</div>
<div class="sect3">
<h4 id="_namtoowi_pl">NAMtoOWI.pl</h4>
<div class="paragraph"><p>The NAM output files in grib2 format that were downloaded by get_nam.pl are
converted into a form that ADCIRC (or ADCIRC+SWAN) can use by the NAMtoOWI.pl
script. This script uses the wgrib2 utility to extract the sea level u, v, and
p from the NAM output files (in grib2 format) and produce ascii data files. The
ascii data are then reprojected from the NAM coordinate system (lambert
conformal) to the ADCIRC coordinate system (geographic) using the
awip_lambert_interp executable. A list of points must be provided where the
reprojected and interpolated data should be calculated. Finally, the
interpolated data are output in OWI (Ocean Weather Inc) format for use in
ADCIRC or ADCIRC+SWAN (NWS=12).</p></div>
</div>
<div class="sect3">
<h4 id="_get_flux_pl">get_flux.pl</h4>
<div class="paragraph"><p>If time-varying river flux boundary condition data (ADCIRC&#8217;s fort.20 file) are
available, and the ASGS has been configured to include river flux forcing, the
get_flux.pl script retrieves the boundary condition files and formats them for
use in ADCIRC. It must reads the ADCIRC mesh file to determine the number of
river flux boundary nodes so that it can interpret the data in the incoming
flux files, since the file format is not self describing. The script also takes
into account the current time in the ADCIRC simulation and the files that are
currently available on the remote ftp site when constructing the flux boundary
condition file that ADCIRC will actually use.</p></div>
</div>
<div class="sect3">
<h4 id="_queue_script_generators">queue script generators</h4>
<div class="paragraph"><p>The ASGS supports many HPC platforms, and it seems that each one is different
from the others and has its own idiosyncracies. As a result, there are a number
of queue script generation scripts, including erdc.pbs.pl, loadleveler.pl,
queenbee.pbs.pl, ranger.serial.pl, ranger.sge.pl, and tezpur.pbs.pl. Although
there are different scripts for different platforms, they are broadly similar,
in that they all use a template approach &#8230; a working queue script has
"blanks" inserted for parameters that will change for different simulation runs
and then a script is written (often cloned from one of the existing ones) that
simply fills in the blanks according to the command line arguments.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_config">config</h3>
<div class="paragraph"><p>The "config" subdirectory contains sample configuration files to illustrate
the changes to be made for various situations.</p></div>
<div class="sect3">
<h4 id="_config_asgs_config_irene_garnet_ec95d_sh">config/asgs_config_irene_garnet_ec95d.sh</h4>
<div class="paragraph"><p>This is a sample configuration file that sets the ASGS up to run hurricane
Irene on the Garnet machine at ERDC using the small ec95d mesh.</p></div>
</div>
<div class="sect3">
<h4 id="_config_asgs_config_irene_swan_garnet_r3_sh">config/asgs_config_irene_swan_garnet_r3.sh</h4>
<div class="paragraph"><p>This sample configuration file illustrates the settings required for
the ASGS to run hurricane Irene with SWAN coupling on the Garnet machine
at USACE ERDC using the FEMA R3 mesh for the US mid-Atlantic coast.</p></div>
</div>
<div class="sect3">
<h4 id="_config_asgs_config_irene_swan_river_br_ncv6b_sh">config/asgs_config_irene_swan_river_br_ncv6b.sh</h4>
<div class="paragraph"><p>During hurricane Irene, this sample configuration file was used in North
Carolina to run the ASGS on the Blueridge Dell linux cluster at RENCI with SWAN
coupling on the NC v6b mesh.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_doc">doc</h3>
<div class="paragraph"><p>This directory contains documentation for the ASGS, as described in the following
subsections.</p></div>
<div class="sect3">
<h4 id="_asgs_operators_guide">ASGS Operators Guide</h4>
<div class="paragraph"><p>ASGSOperatorsGuide.html (and its source document ASGSOperatorsGuide.txt)
provide an overall view of the ASGS code, along with a description of how
to configure the system to perform the desired type of simulations, and
how to run the ASGS.</p></div>
</div>
<div class="sect3">
<h4 id="_asgs_developers_guide">ASGS Developers Guide</h4>
<div class="paragraph"><p>ASGSDevGuide.html (and its source document ASGSDevGuide.txt) provides information
to ASGS installers and developers to help with understand the structure and
function of each piece in the project, and provides a set of step-by-step
installation instructions.</p></div>
</div>
<div class="sect3">
<h4 id="_man_pages">Man Pages</h4>
<div class="paragraph"><p>Manual pages have been developed for some of the ASGS component programs,
mainly as a way of providing a reference to the meaning of the command line
options. Man pages are currently available for the following programs: <em>adcirc</em>
(which includes <em>padcirc</em> and <em>padcswan</em>), <em>adcprep</em>, <em>aswip</em>,
<em>nhc_advisory_bot.pl</em>, and <em>storm_track_gen.pl</em>.  The content and number of
these manual pages will continue to grow over time.</p></div>
</div>
<div class="sect3">
<h4 id="_readme_files">README Files</h4>
<div class="paragraph"><p>Two README Files are available, one for the asymmetric (NWS=9) and one for the
configurable asymmetric (NWS=19) vortex meteorological models that are embedded
in ADCIRC. These were written as initial documentation to provide the salient
information about these models, and will be absorbed into the other types of
documentation listed above over time. They will eventually be removed.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_input">input</h3>
<div class="paragraph"><p>The input subdirectory contains the input files (mesh files, nodal attributes
files, etc) and templates for dynamically generated input files as well as
dynamically generated queue scripts. It also contains the ptFile_gen.pl script
for generating a set of points for reprojecting NAM data into geographic
projection.</p></div>
</div>
<div class="sect2">
<h3 id="_logs">logs</h3>
<div class="paragraph"><p>This subdirectory is meant for storing the log files that the ASGS generates
during execution. The Operator should change to this subdirectory before
executing the ASGS.</p></div>
</div>
<div class="sect2">
<h3 id="_output">output</h3>
<div class="paragraph"><p>The output subdirectory contains all the routines that can be used
when dealing with output and post processing. The code in this subdirectory
can be categorized as follows:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Notification via email that new results are available: cera_notify.sh,
ncfs_cyclone_notify.sh, ranger_notify.sh, corps_cyclone_notify.sh,
ncfs_nam_notify.sh, ranger_parttrack_notify.sh, corps_nam_notify.sh, notify.sh.
</p>
</li>
<li>
<p>
File format transformations and conversions: asgsConvertR3ToNETCDF.pl,
asgsConvertToNETCDF.pl, station_transpose.pl.
</p>
</li>
<li>
<p>
Controlling the generation of line plots, contour plots, images, etc.:
ncfs_post.sh, part_track_post.sh, ranger_post.sh, post.sh, corps_post.sh,
part_track_post_new.sh, r3_post.sh, asgsCreateKMZs.sh.
</p>
</li>
<li>
<p>
Posting results files to other locations over the network: corps_post.sh,
asgsConvertR3ToNETCDF.pl.
</p>
</li>
<li>
<p>
Archiving of results: ncfs_archive.sh, ranger_archive.sh.
</p>
</li>
</ol></div>
<div class="sect3">
<h4 id="_output_parttrack">output/PartTrack</h4>
<div class="paragraph"><p>This subdirectory contains infrastructure for performing particle tracking post processing.</p></div>
</div>
<div class="sect3">
<h4 id="_output_postproc_kmzgis">output/POSTPROC_KMZGIS</h4>
<div class="paragraph"><p>This subdirectory contains code for generating Google Earth (kmz) images
and GIS shape files. Much of the underlying technology was developed by RENCI.</p></div>
</div>
<div class="sect3">
<h4 id="_output_tracking_files">output/TRACKING_FILES</h4>
<div class="paragraph"><p>This subdirectory contains infrastructure for performing particle tracking post processing.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_perl">PERL</h3>
<div class="paragraph"><p>The PERL subdirectory contains the DateCalc perl module that is used for
date math during execution, particularly for preparation of control files
and meteorological forcing files.</p></div>
</div>
<div class="sect2">
<h3 id="_tides">tides</h3>
<div class="paragraph"><p>The tides subdirectory contains code and data for dynamically
providing nodal factors and equilibrium arguments for simulations
that include tidal forcing. It also has infrastructure for setting
tidal boundary conditions.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">Installation</h2>
<div class="sectionbody">
<div class="paragraph"><p>The list of requirements for deployment of the ASGS at a new high performance
computing facility is as follows:</p></div>
<div class="sect2">
<h3 id="_hardware_requirements">Hardware Requirements</h3>
<div class="ulist"><ul>
<li>
<p>
ASGS can complete a single tropical cyclone forecast on the North Carolina
grid (version 6b, 295328
nodes) in 1 hour 10 minutes on 384 2-year old Nehalem cores. A 5 member
ensemble on this machine and using this grid would therefore require 1920
cores.
</p>
</li>
<li>
<p>
The ASGS produced 15 GB of data per advisory with a single ensemble
member on the NC v6b grid during Irene.  Running one complete storm (estimated
at 30 advisories) with 5 ensemble members would therefore require 15*5*30 =
2250 GB = 2.25 TB uncompressed ascii (includes hourly output from all full
domain files, also includes all SWAN output).  We are presently completing the
conversion of ASGS output to NetCDF which will provide significant data storage
savings.
</p>
</li>
<li>
<p>
The OCPR Louisiana mesh has 1,088,315 nodes, so the use of this mesh
to produce results for Louisiana would require 3.7x more resources than
described for the NC v6b mesh, all other things being equal.
</p>
</li>
<li>
<p>
The preferred distribution mechanism for distributing output data files is an
opendap server, preferably one that shares a file system with the ASGS. A
shared filesystem would allow results to be streamed to the OpenDAP system as
they are produced, allowing visualization postprocessing to proceed in
parallel with the generation of results.
</p>
</li>
<li>
<p>
Incoming connectivity requirements include http and
ftp for downloading data. Outgoing connectivity requirements include mail as
well as the ability to expose results to an opendap server.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_software_requirements">Software requirements</h3>
<div class="ulist"><ul>
<li>
<p>
The 2011stable version of the ASGS is compatible with the latest
stable release version of ADCIRC v50. The latest trunk version of the ASGS
always seems to require the latest trunk version of ADCIRC.
</p>
</li>
<li>
<p>
Running the ASGS requires minimal external libraries and
executables, because the System has been designed with portability in mind.
These libraries and executables are as follows: a Fortran compiler including
mpif90, a C compiler, MPI, NetCDF, GNU make, svn client, bash, perl, tar, gzip,
screen, and mail.
</p>
</li>
<li>
<p>
If graphical post processing is required, the list of
requirements becomes much longer, including GMT, ImageMagick, ghostscript,
gnuplot and RenciGETools and all their dependencies.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_installation_step_by_step">Installation Step-by-Step</h3>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Determine if your platform already meets the requirements listed in the
previous two sections. If not, the unfulfilled requirements must be resolved.
</p>
</li>
<li>
<p>
If the ASGS is to be installed on an HPC system, determine if the
target HPC system is already supported by the ASGS. This determination can be
made by checking the <em>env_dispatch</em> subroutine in the <em>asgs_main.sh</em>
source code.
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
If the target HPC system is not found in the list in <em>env_dispatch</em>, then it
is not already supported by the ASGS. Adding support for a new HPC system to the
ASGS is not that difficult; please see the section entitled Pioneering below for
details.
</p>
</li>
<li>
<p>
If the ASGS is to be installed on a personal linux machine (i.e., a desktop
or laptop without a queueing system where you just run parallel jobs directly via
mpiexec), then use <em>desktop</em> as the environment.
</p>
</li>
</ol></div>
</li>
<li>
<p>
If NAM data are to by used as input, compile <em>input/awip_lambert_interp.F</em> to
an executable called <em>awip_lambert_interp.x</em> and place the executable in the
ASGS base directory.  Example instructions for compiling this program are
listed in the comments at the top of the source file. This code is used with
meteorological input from the NAM (North American Mesoscale) model to convert
the data from a Lambert Conformal projection to geographic.
</p>
</li>
<li>
<p>
If NAM data are to be used as input, download and compile the wgrib2 package
from NCEP&#8217;s Climate Prediction Center (CPC):
<a href="http://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/">http://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/</a> &#8230; instructions for
compiling this code are available from that site. The resulting executable
should be named <em>wgrib2</em> and placed in the ASGS base directory.
</p>
</li>
<li>
<p>
Compile the program <em>tides/tide_fac.f</em> according to the instructions in the
source code and name the resulting executable <em>tide_fac.x</em>, leaving it in the
<em>tides</em> subdirectory.
</p>
</li>
<li>
<p>
Go to the directory that contains the ADCIRC source code that will be used by
the ASGS and compile <em>adcprep</em>, <em>padcirc</em> and <em>hstime</em>. If tropical cyclone
forcing will be used, also compile <em>aswip</em>. If wave coupling will be activated,
also compile <em>padcswan</em>. Leave the executable files in place.
</p>
</li>
<li>
<p>
Collect up the ADCIRC input files that would normally be required for the
mesh that will be used in real-time operation. At a minimum, this includes a
fort.14 (mesh) and fort.15 (control) file. It may also include a fort.13
(nodal attributes), fort.26 (swan control), and swaninit files. Place these
files in the <em>input</em> subdirectory. The actual file names are arbitrary; the
ASGS does not require them to be named fort.14 etc.
</p>
</li>
<li>
<p>
Make a copy of the fort.15, swaninit, and fort.26 files; convert the copies into
template files by removing key parameters and replacing them with a special
string that the ASGS will use to fill in the parameters during operation
(analogous to filling out a form). The template versions of the control files
have the string <em>.template</em> appended to their file names by convention, but the names are
arbitrary. Have a look at the files <em>input/FEMA_R3_fort.15.template</em> and
<em>input/FEMA_R3_fort.26.template</em> to get an idea of how to turn a control
file into a template. Its not complicated, but may be slightly tedious. It
only has to be done once.
</p>
</li>
<li>
<p>
If there was a list of elevation or meteorological recording stations in the
fort.15 file, cut and paste the lists of stations into separate files with the
same format as required by the fort.15 &#8230; the files
<em>input/FEMA_R3_elev_stations.txt</em> and <em>input/FEMA_R3_met_stations.txt</em> are
examples. The station lists should not appear in the fort.15 template file.
</p>
</li>
</ol></div>
<div class="paragraph"><p>Once the above steps are complete, the ASGS should be ready to run and produce
results. The installation of programs required for post processing are not
included in the above procedure, and will be covered in a later iteration of
this document.</p></div>
<div class="paragraph"><p>Instructions for configuring an instance of the ASGS and starting it up are
found in the ASGS Operators Guide (in <em>doc/ASGSOperatorsGuide.html</em>).</p></div>
</div>
<div class="sect2">
<h3 id="_pioneering">Pioneering</h3>
<div class="paragraph"><p>The term <em>Pioneering</em> is used to refer to the process of installing and
running the ASGS on an HPC system where it has never run before. Because
the ASGS is not specific to any particular type of HPC system, it is not
too difficult to do this, particularly for an ASGS Developer that already has
experience with the target HPC system and knows its idiosyncracies.</p></div>
<div class="paragraph"><p>The differences between HPC platforms that are relevant to ADCIRC and ASGS
generally fall into the following categories:</p></div>
<div class="ulist"><ul>
<li>
<p>
c, f90, and mpif90 compilers, or different versions of those compilers
</p>
</li>
<li>
<p>
netcdf libraries, versions of those libraries, and procedures for
compiling programs that use netcdf
</p>
</li>
<li>
<p>
differences in the type of queueing system that different platforms use
for job submission (e.g., ASGS currently supports PBS, SGE, LoadLeveler, LSF and mpiexec)
</p>
</li>
<li>
<p>
setting the PATH, LD_LIBRARY_PATH, and/or loaded "modules" interactively
and in compute jobs so that programs can find their libraries when they run
</p>
</li>
<li>
<p>
technical requirements and IT policies for submitting MPI jobs, including
</p>
<div class="ulist"><ul>
<li>
<p>
differences in the way that the number of cores is actually specified when submitting a job
</p>
</li>
<li>
<p>
method for handling reservations and special high priority queue submission
</p>
</li>
<li>
<p>
method of transitioning from a lower priority to a higher priority queue
</p>
</li>
</ul></div>
</li>
<li>
<p>
technical requirements and IT policies for submitting single processor jobs (i.e., adcprep), including:
</p>
<div class="ulist"><ul>
<li>
<p>
whether they can be run on a login node or must be processed through a queue
</p>
</li>
<li>
<p>
how different the submission of single processor jobs is from regular MPI jobs
</p>
<div class="ulist"><ul>
<li>
<p>
different queue name?
</p>
</li>
<li>
<p>
different account number?
</p>
</li>
<li>
<p>
special characters on queue script submission line?
</p>
</li>
</ul></div>
</li>
<li>
<p>
whether single processor jobs that require high memory (as adcprep often does on
large meshes) have other special requirements for submission
</p>
</li>
</ul></div>
</li>
<li>
<p>
method of transmitting numerical and/or graphical results to end users
</p>
</li>
<li>
<p>
optional: libraries available for graphical post processing on the target HPC system
</p>
</li>
<li>
<p>
optional: available facilities and methods for archiving data
</p>
</li>
</ul></div>
<div class="paragraph"><p>These differences will be described more fully in each of the sections below.</p></div>
<div class="sect3">
<h4 id="_compilers">Compilers</h4>
<div class="paragraph"><p>The issue of compilers and compiler versions generally comes up with ADCIRC,
rather than the ASGS itself. The first step in moving ASGS to a new system is
to put ADCIRC on that system and compile <em>adcprep</em>, <em>adcirc</em>, <em>padcirc</em>,
<em>padcswan</em>, <em>aswip</em> and <em>hstime</em>. ADCIRC supports a wide variety of compilers,
but different HPC platforms have different compilers, and different compilers
balk at different things. In contrast, the Fortran utilities required by the
ASGS are generally easy to compile with just about any Fortran compiler.</p></div>
</div>
<div class="sect3">
<h4 id="_netcdf">NetCDF</h4>
<div class="paragraph"><p>The NetCDF libraries that are installed on HPC systems varies widely; some
systems don&#8217;t have it at all, while others have it installed in a directory
that you have to have in your PATH to get things to compile and run, while
others use a "module" system that requires the right modules to be loaded to
compile and/or run programs with NetCDF.</p></div>
<div class="paragraph"><p>If the PATH, LD_LIBRARY_PATH, or module state has to be set in a particular way
to get NetCDF programs to run interactively, these settings will probably have
to be duplicated in the queue scripts generated by the ASGS, which leads us to the next
section.</p></div>
</div>
<div class="sect3">
<h4 id="_job_submission">Job Submission</h4>
<div class="paragraph"><p>The main difference between different HPC platforms that is relevant to the
ASGS is the machine-specific way in which jobs are submitted for execution.
There are many subtle differences in the ways that different machines handle
job submission that each require different information to be supplied in
different ways. Consider a few simple examples:</p></div>
<div class="ulist"><ul>
<li>
<p>
Blueridge, a Dell Linux cluster at RENCI, uses PBS.
</p>
<div class="ulist"><ul>
<li>
<p>
Job submission requires the number of "processors per node" to be specified
in the queue script, as well as the total number of nodes that are requested
(as opposed to requesting a certain number of processors) as well the name of
the queue itself. If the number of CPUs is not evenly divisible by the number
of processors per node, the ASGS must round the requested number of nodes up.
</p>
</li>
<li>
<p>
When running in the dedicated (high priority) queue on blueridge,
the queue name must be specified as "armycore", whereas the normal priority
queue is specified as "batch".
</p>
</li>
<li>
<p>
Furthermore, the number of processors per node is different for these two
queues (PPN=12 if the queue name is "armycore" and PPN=8 if the queue name is
"batch").
</p>
</li>
<li>
<p>
So, for example, for the ASGS to switch from a lower priority to higher
priority queue, it has to be able to dynamically change the queue name, the
number of processors per node, and recalculate the number of nodes, although
the number of processors has not changed.
</p>
</li>
</ul></div>
</li>
<li>
<p>
Diamond, a Cray cluster at ERDC also uses PBS and has the following
requirements for job submission:
</p>
<div class="ulist"><ul>
<li>
<p>
the queue name for single processor jobs is different from the queue name
for MPI jobs
</p>
</li>
<li>
<p>
there is a "trick" in the submission process for single processor jobs that
need a lot of RAM; it requires the ASGS to actually request 0 CPUs for the serial job
</p>
</li>
<li>
<p>
there are different queue names for differently sized jobs (small MPI jobs
are not allowed in the queue for large jobs, and vice versa) &#8230; this must be
taken into account when testing ASGS on small meshes, then scaling up
</p>
</li>
<li>
<p>
if a dedicated reservation has been awarded (for high priority runs), the ASGS must
start using use special, one-time-only queue names for serial and parallel jobs
</p>
</li>
<li>
<p>
when running on a dedicated reserved queue, a different account number must be
used with the new queue names; this account number cannot be used with the regular
queues
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p>The examples above illustrate that (a) different HPC platforms have different
requirements for job submission, even if they use the exact same queueing
system (PBS for example); and (b) a set of job submission rules and
requirements that are simple enough to accommodate when manually running
individual jobs on a single machine can require a suprising amount of attention
to generalize and automate reliably for the full range of anticipated use
cases.</p></div>
<div class="paragraph"><p>The ASGS deals with all these issues using a template approach. That is, an
ASGS Developer starts with some manually developed queue scripts for various
types of jobs on the target platform, and abstracts them to a template (or a
group of templates in some cases). There are several templates available for
currently supported platforms (e.g., <em>input/erdc.adcprep.template.pbs</em> and
<em>input/ranger.template.sge</em>, etc) to use as examples.</p></div>
<div class="paragraph"><p>The other mechanism that the ASGS uses to manage these requirements is the use
of pluggable template filler scripts. The ASGS Developer must write a script or
scripts to properly fill in the queue script template(s) described above.
There are several existing template filler scripts (e.g., <em>erdc.pbs.pl</em>,
<em>loadleveler.pl</em>, <em>queenbee.pbs.pl</em>, <em>ranger.serial.pl</em>, <em>ranger.sge.pl</em>, and
<em>tezpur.pbs.pl</em>) for existing platforms that can be used as examples.</p></div>
<div class="paragraph"><p>Finally, the ASGS Developer must update the <em>env_batch()</em> subroutine in
<em>asgs_main.sh</em> to specify---among other things---the names of the template and
template filler that will be used for that platform. When first starting the
ASGS, the Operator simply selects the name of the computing environment on the
command line, e.g., something like <em>garnet</em> or <em>blueridge</em> or <em>desktop</em>. The
ASGS checks to see if the specified machine is supported using the
<em>env_dispatch()</em> subroutine, which then sets the names of the queue script
templates and queue script filler scripts that are appropriate for that
platform.</p></div>
<div class="paragraph"><p>Here is an illustration of this template-based configurability in action:</p></div>
<div class="ulist"><ul>
<li>
<p>
In order to run <em>adcprep</em>, the ASGS calls the <em>prepFile()</em> subroutine, which
checks to see if the queueing system was specified as either Sun Grid Engine
(SGE, which is used on Ranger at TACC), or Portable Batch System (PBS, which is
used on many other machines).
</p>
</li>
<li>
<p>
if the queue system is PBS
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
the ASGS calls a queue script generation program, whose name is configurable
</p>
</li>
<li>
<p>
it feeds the queue script generation program a queue script template, whose name is also configurable
</p>
</li>
<li>
<p>
it provides a variety of command line options, such as the number of processors per
compute node, the number of compute processors the job should run on, the account number for the job, and the name of the queue
</p>
</li>
<li>
<p>
the resulting queue script is then submitted with <em>qsub</em>
</p>
</li>
<li>
<p>
the ASGS monitors for completion
</p>
</li>
</ol></div>
</li>
<li>
<p>
if the queue system is SGE
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
the ASGS performs a similar set of actions as for the PBS case above, but
with a shorter set of command line options to the queue script generator
</p>
</li>
<li>
<p>
the ASGS could also perform a "resubmit" step, since SGE on Ranger at TACC
had a habit of intermittently rejecting valid compute jobs
</p>
</li>
</ol></div>
</li>
<li>
<p>
if the queue script is neither PBS nor SGE, the ASGS executes <em>adcprep</em> directly,
that is, on the login node if running on an HPC machine, or (more likely) on
the command line, if running on a desktop or laptop
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_results_transmission">Results Transmission</h4>
<div class="paragraph"><p>The transmission of results to end users is considered part of the post
processing in the ASGS. Different ASGS installations will vary widely on the
type of post processing that they want to do in-situ, that is, right there in
the HPC environment where the ASGS is running and the results are being
generated.</p></div>
<div class="paragraph"><p>This diversity is supported in the ASGS by allowing the ASGS Developer to
simply supply the name of an executable (generally a shell script) that the
ASGS should run at the end of each forecast. This allows the ASGS Developer to
insert any type of post processing at all, and maintains the modular
structure of the overall system.</p></div>
<div class="paragraph"><p>The most basic post processing is simply transmission of numerical results to
an external server. In this case, the post processing script would contain
an <em>scp</em> command to copy the result files. In order to avoid an interactive
password prompt, the ASGS Operator&#8217;s private key should be copied to the proper
user account on the receiving server, and key authentication should be enabled
for ssh.</p></div>
</div>
<div class="sect3">
<h4 id="_post_processing">Post Processing</h4>
<div class="paragraph"><p>The ASGS already supports a great deal of built-in post processing options that
have been required over the years by different sites. These include generation
of jpgs of contour plots using FigureGen, generation of GIS shape files of
results and generation of Google Earth visualizations of results using
RenciGETools, generation of line plots of elevation and wind speed using
gnuplot, particle tracking algorithms, conversion of ascii adcirc output to
netcdf, and posting of results to external opendap servers. Many of these
output types have their own dependencies, which may or may not be satisfied by
the target HPC environment. Please see the <em>output</em> subdirectory for samples of
various post processing scripts that are already available.</p></div>
</div>
<div class="sect3">
<h4 id="_archiving">Archiving</h4>
<div class="paragraph"><p>The final consideration in platform-, machine-, and site-specific customization
is the use of data archiving. Some environments have a dedicated archival storage
system, while others have no long term storage facilities at all. The ASGS handles
site-specific archiving with the same approach as it does with post processing: it
allows the ASGS Developer to supply the file name of a script that performs whatever
actions will be necessary to archive the results. The ASGS executes the script once
all ensemble members in forecast have been completed.</p></div>
<div class="paragraph"><p>Because of the nature of archiving (data compression, data copying or
transmission which may take a long time), the archive script is executed with
an ampersand, that is, it is run in the background. This allows the ASGS to
get on with looking for the next cycle or advisory while the archive script packages
up the previous cycle or advisory.</p></div>
<div class="paragraph"><p>Please see the <em>output</em> subdirectory for samples of various existing archive scripts for
hints and ideas about generating new archiving scripts.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_meteorological_forcing">Meteorological Forcing</h2>
<div class="sectionbody">
<div class="paragraph"><p>The ASGS is capable of using gridded met fields from NCEP&#8217;s NAM model, or
two different types of vortex forcing with ADCIRC&#8217;s asymmetric wind models
(NWS9 and NWS19). An outline of the procedure used by ASGS for obtaining
and processing these input data is provided below.</p></div>
<div class="sect2">
<h3 id="_nam_forcing">NAM Forcing</h3>
<div class="paragraph"><p>The National Centers for Environmental Prediction (NCEP, a division of the
National Oceanic and Atmospheric Administration, NOAA) runs the North American
Mesoscale model (NAM) four times per day, producing a nowcast and a 3.5 day
forecast of the atmosphere over North America.</p></div>
<div class="paragraph"><p>The NAM data are produced on a Lambert Conformal grid with 12km spacing and
written in a binary file format called grib2. The ASGS uses the following
procedure to prepare these data for use in ADCIRC.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
The <em>get_nam.pl</em> program is used to connect to the NCEP ftp site once per
minute and check the dates and times of the most recent NAM output files. If it
finds files that have dates and times that are more recent than the most recent
ADCIRC hotstart file, a new cycle is deemed to have started, and the new files
are downloaded in preparation for a nowcast run.
</p>
</li>
<li>
<p>
Once the data have been downloaded, the ASGS runs the <em>NAMtoOWI.pl</em> script
to perform the following procedures:
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
extract the data that are required (u, v, p at 10m or MSL &#8230; the grib2
files also have a lot of data that is not needed by the ASGS)
</p>
</li>
<li>
<p>
call <em>awip_lambert_interp.x</em> on each grib2 file to reproject the data from
Lambert Conformal to geographic projection and interpolate the data onto a grid
that is regular in geographic coordinates (which is required for the OWI file
format) using an external list of lat,lon points (e.g., <em>input/ptFile.txt</em>)
</p>
</li>
<li>
<p>
write the data in OWI format to fort.221 and fort.222 files, and generate a
companion fort.22
</p>
</li>
</ol></div>
</li>
<li>
<p>
The ASGS then uses <em>control_file_gen.pl</em> and the meteorological files that
were generated by <em>NAMtoOWI.pl</em> to properly formulate the ADCIRC fort.15
control file (and SWAN fort.26 file, if any).
</p>
</li>
<li>
<p>
Once the nowcast job has been submitted and completed, the ASGS calls
<em>get_nam.pl</em> again to download the NAM forecast data for the same cycle, using
the steps listed above.
</p>
</li>
</ol></div>
<div class="paragraph"><p>The forecast data are not downloaded at the same time as the nowcast data,
because NCEP releases the NAM data files as they are generated, which can take more
than an hour. As a result, it makes more sense to download and run the nowcast
while NCEP continues to post forecast data, then come back when the nowcast run
is complete and download the forecast.</p></div>
<div class="paragraph"><p>The ASGS may be able to finish the nowcast before NCEP finishes posting
forecast data, depending on the size of the mesh, number and speed of the
processors the ASGS is using, and queue congestion, if any. If that happens,
<em>get_nam.pl</em> just downloads the forecast data as they become available, and
when they have all been downloaded, the ASGS goes on to set up and run the
forecast as described above.</p></div>
</div>
<div class="sect2">
<h3 id="_parametric_vortex_forcing">Parametric Vortex Forcing</h3>
<div class="paragraph"><p>The ASGS can also be configured to use data from the National Hurricane Center
(NHC) to generate parameter files for use in ADCIRC&#8217;s internal configurable
asymmetric vortex model (ADCIRC NWS=19).</p></div>
<div class="sect3">
<h4 id="_background">Background</h4>
<div class="paragraph"><p>The asymmetric vortex wind model input differs from most other types of wind
input in ADCIRC in that it consists of storm parameters, rather than the
meteorological data itself. ADCIRC then uses these parameters to generate the
actual meteorological data internally at each node at every time step during
the simulation. The result is that the fort.22 files are very small (e.g.
20kB), in comparison with fort.22 files that contain actual meteorological
data.</p></div>
<div class="paragraph"><p>The format of the fort.22 file for the asymmetric wind model is the ATCF
(a.k.a. "BEST track") format. This format was developed by the U.S. Navy, and
ATCF stands for Automated Tropical Cyclone Forecast. Historical tracks,
real-time hindcast tracks and real-time forecast tracks may be found in this
format. The format is documented in detail at the following web site:</p></div>
<div class="paragraph"><p><a href="http://www.nrlmry.navy.mil/atcf_web/docs/database/new/abrdeck.html">http://www.nrlmry.navy.mil/atcf_web/docs/database/new/abrdeck.html</a></p></div>
<div class="paragraph"><p>One important thing to remember about this format is that it looks like CSV
data, but it is actually fixed column width data. Never change the width of the
columns when you edit this data!</p></div>
<div class="paragraph"><p>It is assumed by the asymmetric wind code within ADCIRC that the first entry in
the fort.22 file corresponds to the cold start time (ADCIRC time=0) if the
simulation is cold started, or to the hotstart time if the simulation is
hotstarted. Therefore, the forecast period (column #6) needs to be edited by
the workflow scripts to reflect the time of the forecast/nowcast for each track
location (each line) in hours from the start of the simulation (0, 6, 12, 18,
etc). The original data in that column depends on what type of best track
format data is being used. The original data might have 0 or other numbers in
that column.</p></div>
<div class="paragraph"><p>The behavior of the configurable asymmetric meteorological model (NWS=19) is
similar to its ancestor, the original asymmetric meteorological model (NWS=9).
However, the configurable asymmetric vortex wind model was developed for
several reasons: (1) to allow more visibility into the parameters, such as
Rmax, that control a storm&#8217;s size and shape and are calculated within the wind
model code; (2) to allow the user to control parameters such as Rmax so that
they may be adjusted by the user; and (3) to allow the user to
deterministically compensate for input data that are missing or nonexistent
(such as wind radii in various quadrants for a particular isotach).</p></div>
<div class="paragraph"><p>The mechanism for achieving the goals described above is a preprocessing
program called the asymmetric wind input preprocessor, or <em>aswip</em>, that
takes the ATCF formatted input data that would normally be used for the
NWS8 or NWS9 and adds columns to it that describe the following things:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
The Rmax from the hindcast (i.e., BEST lines) has been persisted from the
Rmax column (described as MRD in the ATCF documentation) from the value in the
forecast (i.e., OFCL lines).
</p>
</li>
<li>
<p>
The storm direction DIR and speed SPEED in the ATCF file have been replaced
with the calculated direction and speed to be used by ADCIRC. The values are
provided in the same format as the ATCF file to provide compatibility between
methods. The speed in given in knots and the direction is given in compass
coordinates, with zero degrees indicating North and values increasing
clockwise.
</p>
</li>
<li>
<p>
In the 2nd column after the storm name, the cycle number is provided. A
<em>cycle</em> is an entry or set of entries in the file that all have the same storm
time or forecast period.  For cycles that have more than one isotach, this
value will be repeated for each isotach (starting from 1 for the first cycle in
the file).
</p>
</li>
<li>
<p>
The 3rd column after the storm name contains the number of isotachs that are
reported for that particular cycle.  This value is also repeated on each line
for each isotach that is reported per cycle. For example, if the cycle has a
34kt and a 50kt isotach entry then this column will contain a <em>2</em> for both
entries in that cycle.
</p>
</li>
<li>
<p>
The following 4 columns contain the flags that tell the ADCIRC NWS 19 code
whether or not to use a particular wind radius from the isotach under
consideration. There is a flag for each quadrant. A 0 indicates that the wind
radius for that isotach and quadrant will not be used.  A 1 indicates that
the wind radius for that isotach and quadrant will be used. For example: if
only the 34kt isotach is provided, then then all four wind radii must be used,
and the columns will all be set to 1.
</p>
</li>
<li>
<p>
In the next 4 columns, the calculated Rmax for each quadrant is listed
in the following order: NE SE SW NW.
</p>
</li>
<li>
<p>
The next column contains the overall Holland B value.
</p>
</li>
</ol></div>
<div class="paragraph"><p>Another example: if 3 isotachs are provided then the columns may look
like the following:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>34 ... 3 0 0 0 0 ...
50 ... 3 0 0 1 1 ...
64 ... 3 1 1 0 0 ...</pre>
</div></div>
<div class="paragraph"><p>this indicates -</p></div>
<div class="ulist"><ul>
<li>
<p>
use NO radii from the 34 kt isotach
</p>
</li>
<li>
<p>
use the 3 &amp; 4 quadrant radii from the 50 kt isotach
</p>
</li>
<li>
<p>
use the 1 &amp; 2 quadrant radii from the 64 kt isotach
</p>
</li>
</ul></div>
<div class="paragraph"><p>Users could potentially modify these flags in the input file to manually select
which radii to use for each cycle.</p></div>
<div class="paragraph"><p>Finally, one valuable aspect of this file format is that it can be used by
NWS8, NWS9, or NWS19, since the original data have not been modified. The
extra columns are used as input by NWS19, and as a result, they provide both
metadata and control over these parameters.</p></div>
</div>
<div class="sect3">
<h4 id="_procedure">Procedure</h4>
<div class="paragraph"><p>The steps that the ASGS uses to prepare the Forecast/Advisory data for use in
ADCIRC are described below.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
The ASGS uses the <em>get_atcf.pl</em> script to check the NHC RSS feed (which is
just an xml text file they keep on their web site). The RSS feed contains the
current advisory number and a hyperlink to the html-formatted file containing
the forecast/advisory text.
</p>
</li>
<li>
<p>
The <em>get_atcf.pl</em> starts by downloading the latest ATCF formatted hindcast
file from the NHC anonymous ftp site. The current name of the storm is parsed
out of the hindcast file for use in <em>get_atcf.pl</em> during parsing of the
RSS feed; e.g., the storm name can change from TD TWO to TD BERTHA from one
advisory to the next. The hindcast data are also used later when ASGS calls
<em>storm_track_gen.pl</em>.
</p>
</li>
<li>
<p>
The <em>get_atcf.pl</em> script then downloads the NHC forecast/advisory as follows
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
if the ASGS has just started, it follows the hyperlink in the RSS feed and
downloads the current forecast/advisory
</p>
</li>
<li>
<p>
if the ASGS has already run through a complete advisory cycle, it
polls the NHC RSS feed once per minute &#8230; when it detects that
the advisory number has been updated in that file, it follows the
hyperlink in the RSS xml file and downloads the current forecast/advisory,
returning the new advisory number to the ASGS
</p>
</li>
</ol></div>
</li>
<li>
<p>
The ASGS calls the <em>nhc_advisory_bot.pl</em> script to parse the
forecast/advisory text out of the html and parse the relevant parameters out of
the forecast advisory text to produce an ATCF-formatted forecast file.
</p>
</li>
<li>
<p>
After <em>get_atcf.pl</em> and <em>nhc_advisory_bot.pl</em> have run, the ASGS has
an ATCF-formatted hindcast file (containing the past and present states of the
tropical cyclone) and an ATCF-formatted forecast file containing the present and
predicted future states of the tropical cyclone.
</p>
</li>
<li>
<p>
The ASGS then calls <em>storm_track_gen.pl</em>, providing it with the current
hotstart time in ADCIRC; the <em>storm_track_gen.pl</em> script melds the hindcast
and forecast data together such that it
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
starts at the current ADCIRC hotstart time
</p>
</li>
<li>
<p>
ends at the end of the nowcast period, which is the same as the end of the
hindcast data, if the run is a nowcast run
</p>
</li>
<li>
<p>
ends at the end of the forecast period, if the run is a forecast run
</p>
</li>
<li>
<p>
has the specifed track perturbations applied, if any perturbations were
specified, and if the run is a forecast run
</p>
</li>
</ol></div>
</li>
<li>
<p>
The <em>storm_track_gen.pl</em> script writes out the melded data to an
ATCF-formatted fort.22 file.
</p>
</li>
<li>
<p>
The ASGS then calls <em>aswip</em> to process the fort.22 file produced by
<em>storm_track_gen.pl</em>; <em>aswip</em> calculates the Rmax in each quadrant and writes
out an NWS_19_fort.22 for use in ADCIRC.
</p>
</li>
</ol></div>
<div class="paragraph"><p>After the NWS_19_fort.22 file has been produced, the ASGS feeds it to
<em>control_file_gen.pl</em>, which generates a fort.15 file that will cover the time
period specified by the parameters listed in the NWS_19_fort.22 file.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_development_strategy">Development Strategy</h2>
<div class="sectionbody">
<div class="paragraph"><p>The ASGS development strategy consists of the maintenance of two separate
versions at any given time: the stable version and the development version. The
stable version only receives bug fixes, while the development version receives
bug fixes as well as new features.</p></div>
<div class="paragraph"><p>At some point, the development version becomes stable. At that time, a stable
branch is created from it, and then new features are added to the previosly
stable code, creating a new development version.</p></div>
<div class="paragraph"><p>As of this writing (7 May 2012) the latest stable version is on the branch
named 2011stable. The ASGS trunk is where new features are developed.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_subversion">Subversion</h2>
<div class="sectionbody">
<div class="paragraph"><p>Subversion is a version control system. That is, it provides a means for many
software developers to collaborate on a single software project.</p></div>
<div class="paragraph"><p>A subversion repository is a storehouse of code for a particular project.
Subversion repositories consist of a trunk, which is the mainline code that
everyone shares, and any number of branches that are created by and for
individual users.</p></div>
<div class="paragraph"><p>A branch may be created by a developer that has a lot of changes to make over a
longer period of time. This lone developer can work on a branch without
affecting the mainline code. Once the changes in the branch are satisfactory,
the branch can be merged back to the trunk, making the changes available to
all.</p></div>
<div class="paragraph"><p>A further advantage of Subversion is that it automates the process of merging
new features into ASGS. For example, in the past, without Subversion,
developers modified their local copies of ASGS and wanted to merge the
modifications into the mainline code. This required hours or days of
painstakingly examining each change they had made and cutting and pasting the
changes one by one into the up-to-date version of ASGS. With Subversion, the
software examines the changes that were made locally and makes corresponding
changes to the mainline version in an automated way.</p></div>
<div class="sect2">
<h3 id="_policies">Policies</h3>
<div class="paragraph"><p>Working with subversion requires greater coordination among ASGS developers.
For example, if two developers change the same line of code in two different
branches in two different ways, this will create a conflict that will have to
be resolved manually.</p></div>
<div class="paragraph"><p>Furthermore, if one developer makes changes to trunk that prevent the system
from running, it will be difficult for other developers to continue working if
they update to the latest code. As a result, ASGS development with Subversion
will adhere to the following policies:</p></div>
<div class="ulist"><ul>
<li>
<p>
Communicate. Jason Fleming is responsible for making sure ASGS development is
smooth, pain-free and productive---when in doubt, email him
(<a href="mailto:jason.fleming@seahorsecoastal.com">jason.fleming@seahorsecoastal.com</a>).
</p>
</li>
<li>
<p>
Make a branch to develop new features, rather than making changes to trunk.
</p>
</li>
<li>
<p>
Don&#8217;t commit changes to trunk that might cause issues that prevent the system
from running, at least on your platform.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_instructions">Instructions</h3>
<div class="paragraph"><p>Comprehensive documentation for Subversion is available:
<a href="http://svnbook.red-bean.com/">http://svnbook.red-bean.com/</a>.</p></div>
<div class="paragraph"><p>The ASGS code is hosted at the following Subversion repository location:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>http://www.seahorsecoastal.com/svn/asgs</pre>
</div></div>
<div class="paragraph"><p>To check out code from the trunk, please type</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>svn checkout http://www.seahorsecoastal.com/svn/asgs/trunk</pre>
</div></div>
<div class="paragraph"><p>Here are a few examples of things that we commonly do with svn.</p></div>
<div class="sect3">
<h4 id="_compare_revisions">Compare Revisions</h4>
<div class="paragraph"><p>In order to see the changes between revisions of the repository, type (for
example)</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>svn diff -r 15:16 control_file_gen.pl</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_package_up_code_from_repository">Package Up Code From Repository</h4>
<div class="paragraph"><p>In order to create a tar file that contains just the ASGS code and excludes the
.svn directories, the first step is to export the code to a new subdirectory.
For example:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>svn export ./trunk ./asgs_today</pre>
</div></div>
<div class="paragraph"><p>Would copy the local files under version control from the trunk subdir to the
asgs_today subdir, excluding the .svn files. Particular revisions of the svn
repository can also be extracted, see the svn documentation for details on how
to do this.</p></div>
</div>
<div class="sect3">
<h4 id="_pull_old_version_from_repository">Pull Old Version from Repository</h4>
<div class="paragraph"><p>One advantage of using svn is that it is easy to go back to an older version of
the code, if necessary. The first thing to do in this case is usually to look
at the svn log to see what changes were made, so that you can select the right
version of the repository to extract. Go to the subdirectory of the code tree
that you want an older version of and issue the command</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>svn log</pre>
</div></div>
<div class="paragraph"><p>Look at the log entries, and note the revision that you&#8217;d like to extract.
Let&#8217;s say you want to retrieve asgs/trunk at revision 65 of the repository (for
example). Issue the following command:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>svn checkout -r 65 http://www.seahorsecoastal.com/svn/asgs/trunk</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_make_a_branch">Make a Branch</h4>
<div class="paragraph"><p>To make a branch off trunk to add a new feature and call it the myfeature branch:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>svn copy http://www.seahorsecoastal.com/svn/asgs/trunk http://www.seahorsecoastal.com/svn/asgs/branches/myfeature --message "Creating branch to add myfeature"</pre>
</div></div>
<div class="paragraph"><p>Then to start using the newly created branch:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>svn checkout http://www.seahorsecoastal.com/svn/asgs/branches/myfeature</pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_a_this_document">Appendix A: This Document</h2>
<div class="sectionbody">
<div class="paragraph"><p>This document was prepared from the text file ASGSDevGuide.txt using
software called asciidoc (<a href="http://www.methods.co.nz/asciidoc/">http://www.methods.co.nz/asciidoc/</a>). The document
can be formatted as an html page with the command</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>asciidoc --backend html5 -a toc2 ASGSDevGuide.txt</pre>
</div></div>
<div class="paragraph"><p>or formatted as a pdf with the command</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>a2x --format=pdf -a toc2 ASGSDevGuide.txt</pre>
</div></div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-05-09 14:53:10 EDT
</div>
</div>
</body>
</html>
